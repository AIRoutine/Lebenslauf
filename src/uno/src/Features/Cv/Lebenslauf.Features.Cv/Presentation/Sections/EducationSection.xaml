<UserControl x:Class="Lebenslauf.Features.Cv.Presentation.Sections.EducationSection"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:utu="using:Uno.Toolkit.UI">

    <!-- Section Card with Elevation -->
    <Border CornerRadius="16"
            Padding="24"
            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
            Translation="0,0,16"
            Style="{StaticResource CardBorderStyle}">
        <Border.Shadow>
            <ThemeShadow />
        </Border.Shadow>

        <utu:AutoLayout Orientation="Vertical"
                        Style="{StaticResource ContentAutoLayoutStyle}"
                        Spacing="20">

            <!-- Section Header with Icon -->
            <StackPanel Orientation="Horizontal" Spacing="12">
                <Border Width="40" Height="40"
                        CornerRadius="20"
                        Style="{StaticResource CardBorderStyle}">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#4caf50" Offset="0.0" />
                            <GradientStop Color="#2e7d32" Offset="1.0" />
                        </LinearGradientBrush>
                    </Border.Background>
                    <FontIcon Glyph="&#xE7BE;"
                              FontSize="20"
                              Foreground="White"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center" />
                </Border>
                <TextBlock Text="Ausbildung"
                           Style="{StaticResource TitleLargeTextBlockStyle}"
                           VerticalAlignment="Center" />
            </StackPanel>

            <!-- Education Items with Timeline -->
            <ItemsRepeater ItemsSource="{Binding}"
                           Style="{StaticResource DefaultItemsRepeaterStyle}">
                <ItemsRepeater.Layout>
                    <StackLayout Spacing="0" />
                </ItemsRepeater.Layout>
                <ItemsRepeater.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="48" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <!-- Timeline -->
                            <StackPanel HorizontalAlignment="Center">
                                <!-- Top Line -->
                                <Border Width="3" Height="16"
                                        Background="{ThemeResource DividerBrush}"
                                        CornerRadius="1.5"
                                        Style="{StaticResource CardBorderStyle}" />

                                <!-- Circle with Glow -->
                                <Border Width="18" Height="18"
                                        CornerRadius="9"
                                        BorderThickness="3"
                                        BorderBrush="#4caf50"
                                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                        Style="{StaticResource CardBorderStyle}" />

                                <!-- Bottom Line -->
                                <Border Width="3" Height="56"
                                        Background="{ThemeResource DividerBrush}"
                                        CornerRadius="1.5"
                                        Style="{StaticResource CardBorderStyle}" />
                            </StackPanel>

                            <!-- Content Card -->
                            <Border Grid.Column="1"
                                    CornerRadius="12"
                                    Padding="16"
                                    Margin="0,8"
                                    Background="{ThemeResource SurfaceBrush}"
                                    Style="{StaticResource CardBorderStyle}">
                                <StackPanel Spacing="6">
                                    <!-- Year Badge -->
                                    <Border Background="#E8F5E9"
                                            CornerRadius="8"
                                            Padding="10,4"
                                            HorizontalAlignment="Left"
                                            Style="{StaticResource CardBorderStyle}">
                                        <TextBlock Foreground="#2e7d32"
                                                   Style="{StaticResource LabelMediumTextBlockStyle}"
                                                   FontWeight="SemiBold">
                                            <Run Text="{Binding StartYear}" /><Run Text=" - " /><Run Text="{Binding EndYear}" />
                                        </TextBlock>
                                    </Border>

                                    <!-- Institution -->
                                    <TextBlock Text="{Binding Institution}"
                                               Style="{StaticResource TitleMediumTextBlockStyle}"
                                               FontWeight="SemiBold" />

                                    <!-- Degree -->
                                    <TextBlock Text="{Binding Degree}"
                                               Style="{StaticResource BodyMediumTextBlockStyle}"
                                               Foreground="{ThemeResource OnSurfaceVariantBrush}" />

                                    <!-- Description (if available) -->
                                    <TextBlock Text="{Binding Description}"
                                               Visibility="{Binding Description, Converter={StaticResource NullToCollapsedConverter}}"
                                               Style="{StaticResource BodySmallTextBlockStyle}"
                                               Foreground="{ThemeResource OnSurfaceVariantBrush}"
                                               Opacity="0.8"
                                               TextWrapping="Wrap"
                                               Margin="0,4,0,0" />
                                </StackPanel>
                            </Border>
                        </Grid>
                    </DataTemplate>
                </ItemsRepeater.ItemTemplate>
            </ItemsRepeater>
        </utu:AutoLayout>
    </Border>
</UserControl>

<fw:BasePage x:Class="Lebenslauf.Features.Cv.Presentation.AdminPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:fw="using:UnoFramework.Pages"
      xmlns:utu="using:Uno.Toolkit.UI"
      xmlns:uf="using:UnoFramework.Controls"
      xmlns:models="using:Lebenslauf.Features.Cv.Contracts.Models"
      Background="#FFFFFF">

    <fw:BasePage.Resources>
        <Style x:Key="AdminTitleStyle" TargetType="TextBlock" BasedOn="{StaticResource TitleLargeTextBlockStyle}">
            <Setter Property="FontWeight" Value="Black" />
            <Setter Property="Foreground" Value="#000000" />
        </Style>
        <Style x:Key="AdminSectionStyle" TargetType="TextBlock" BasedOn="{StaticResource TitleMediumTextBlockStyle}">
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Foreground" Value="#000000" />
        </Style>
        <Style x:Key="AdminDescStyle" TargetType="TextBlock" BasedOn="{StaticResource BodyMediumTextBlockStyle}">
            <Setter Property="Foreground" Value="#666666" />
        </Style>
        <Style x:Key="AdminProfileNameStyle" TargetType="TextBlock" BasedOn="{StaticResource BodyLargeTextBlockStyle}">
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Foreground" Value="#000000" />
        </Style>
        <Style x:Key="AdminProfileDescStyle" TargetType="TextBlock" BasedOn="{StaticResource BodyMediumTextBlockStyle}">
            <Setter Property="Foreground" Value="#666666" />
        </Style>
        <Style x:Key="AdminBadgeStyle" TargetType="TextBlock" BasedOn="{StaticResource LabelSmallTextBlockStyle}">
            <Setter Property="Foreground" Value="#FFFFFF" />
        </Style>
        <Style x:Key="AdminSlugStyle" TargetType="TextBlock" BasedOn="{StaticResource LabelSmallTextBlockStyle}">
            <Setter Property="Foreground" Value="#999999" />
        </Style>
        <Style x:Key="AdminHintTitleStyle" TargetType="TextBlock" BasedOn="{StaticResource LabelMediumTextBlockStyle}">
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Foreground" Value="#E65100" />
        </Style>
        <Style x:Key="AdminCardButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        </Style>
    </fw:BasePage.Resources>

    <uf:BusyOverlay IsBusy="{Binding IsBusy}" BusyMessage="{Binding BusyMessage}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Background="#000000" Padding="{utu:Responsive Narrow='16,16', Normal='24,20'}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Button Command="{Binding GoBackCommand}"
                            Style="{StaticResource IconButtonStyle}"
                            Background="Transparent"
                            VerticalAlignment="Center"
                            Margin="0,0,12,0">
                        <FontIcon Glyph="&#xE72B;" FontSize="20" Foreground="#FFFFFF" />
                    </Button>

                    <StackPanel Grid.Column="1" Spacing="2">
                        <TextBlock Text="ADMIN"
                                   Style="{StaticResource PageHeaderTitleStyle}"
                                   FontSize="{utu:Responsive Narrow=20, Normal=24}" />
                        <TextBlock Text="Profil-Verwaltung"
                                   Style="{StaticResource PageHeaderSubtitleStyle}"
                                   FontSize="{utu:Responsive Narrow=11, Normal=12}" />
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Content -->
            <ScrollViewer Grid.Row="1" Padding="{utu:Responsive Narrow='20,16', Normal='32,24'}">
                <StackPanel MaxWidth="600" HorizontalAlignment="Center" Spacing="24">

                    <!-- Current Profile Info -->
                    <Border Background="#F5F5F5" CornerRadius="8" Padding="16">
                        <StackPanel Spacing="8">
                            <TextBlock Text="AKTIVES PROFIL" Style="{StaticResource AdminSectionStyle}" />
                            <TextBlock Style="{StaticResource AdminDescStyle}">
                                <Run Text="Aktuell: " />
                                <Run Text="{Binding SelectedProfile.Name, FallbackValue='Laden...'}" FontWeight="Bold" />
                            </TextBlock>
                        </StackPanel>
                    </Border>

                    <!-- Profile Selection -->
                    <StackPanel Spacing="12">
                        <TextBlock Text="PROFILE AUSWÃ„HLEN" Style="{StaticResource AdminSectionStyle}" />

                        <ItemsRepeater x:Name="ProfileList" ItemsSource="{Binding Profiles}">
                            <ItemsRepeater.Layout>
                                <StackLayout Spacing="8" />
                            </ItemsRepeater.Layout>
                            <ItemsRepeater.ItemTemplate>
                                <DataTemplate x:DataType="models:ProfileModel">
                                    <Button Style="{StaticResource AdminCardButtonStyle}"
                                            Command="{Binding DataContext.ActivateProfileCommand, ElementName=ProfileList}"
                                            CommandParameter="{Binding}">
                                        <Border CornerRadius="8"
                                                Padding="16"
                                                BorderThickness="2"
                                                BorderBrush="#E0E0E0">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>

                                                <StackPanel Spacing="4">
                                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                                        <TextBlock Text="{x:Bind Name}"
                                                                   Style="{StaticResource AdminProfileNameStyle}" />
                                                        <Border Background="#000000"
                                                                CornerRadius="4"
                                                                Padding="6,2"
                                                                Visibility="{x:Bind IsDefault}">
                                                            <TextBlock Text="Standard"
                                                                       Style="{StaticResource AdminBadgeStyle}" />
                                                        </Border>
                                                    </StackPanel>
                                                    <TextBlock Text="{x:Bind Description}"
                                                               Style="{StaticResource AdminProfileDescStyle}"
                                                               TextWrapping="Wrap" />
                                                    <TextBlock Style="{StaticResource AdminSlugStyle}">
                                                        <Run Text="Slug: " />
                                                        <Run Text="{x:Bind Slug}" />
                                                    </TextBlock>
                                                </StackPanel>

                                                <FontIcon Grid.Column="1"
                                                          Glyph="&#xE73E;"
                                                          FontSize="24"
                                                          Foreground="#000000"
                                                          VerticalAlignment="Center" />
                                            </Grid>
                                        </Border>
                                    </Button>
                                </DataTemplate>
                            </ItemsRepeater.ItemTemplate>
                        </ItemsRepeater>
                    </StackPanel>

                    <!-- Info -->
                    <Border Background="#FFF3E0" CornerRadius="8" Padding="16">
                        <StackPanel Spacing="8">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE946;" FontSize="16" Foreground="#E65100" />
                                <TextBlock Text="Hinweis" Style="{StaticResource AdminHintTitleStyle}" />
                            </StackPanel>
                            <TextBlock Text="Nach der Profil-Auswahl werden alle Seiten mit den neuen Daten aktualisiert. Jedes Profil zeigt unterschiedliche Skills, Projekte und Beschreibungen."
                                       Style="{StaticResource AdminDescStyle}"
                                       TextWrapping="Wrap" />
                        </StackPanel>
                    </Border>

                </StackPanel>
            </ScrollViewer>
        </Grid>
    </uf:BusyOverlay>
</fw:BasePage>

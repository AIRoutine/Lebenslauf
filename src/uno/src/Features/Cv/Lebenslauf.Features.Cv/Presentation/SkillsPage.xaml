<fw:BasePage x:Class="Lebenslauf.Features.Cv.Presentation.SkillsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:fw="using:UnoFramework.Pages"
      xmlns:utu="using:Uno.Toolkit.UI"
      xmlns:uf="using:UnoFramework.Controls"
      xmlns:controls="using:Lebenslauf.Core.Styles.Controls"
      xmlns:converters="using:Lebenslauf.Features.Cv.Converters"
      Background="#FFFFFF">

    <fw:BasePage.Resources>
        <converters:CollectionToVisibilityConverter x:Key="CollectionToVisibilityConverter" />
        <!-- B&W Styles -->
        <Style x:Key="SkillsTitleStyle" TargetType="TextBlock" BasedOn="{StaticResource TitleLargeTextBlockStyle}">
            <Setter Property="FontWeight" Value="Black" />
            <Setter Property="Foreground" Value="#000000" />
        </Style>
        <Style x:Key="SkillsSectionStyle" TargetType="TextBlock" BasedOn="{StaticResource TitleMediumTextBlockStyle}">
            <Setter Property="FontWeight" Value="Black" />
            <Setter Property="Foreground" Value="#000000" />
            <Setter Property="CharacterSpacing" Value="100" />
        </Style>
        <Style x:Key="SkillsChipStyle" TargetType="TextBlock" BasedOn="{StaticResource LabelMediumTextBlockStyle}">
            <Setter Property="Foreground" Value="#000000" />
        </Style>
        <Style x:Key="SkillsChipInvertStyle" TargetType="TextBlock" BasedOn="{StaticResource LabelMediumTextBlockStyle}">
            <Setter Property="Foreground" Value="#FFFFFF" />
        </Style>
        <Style x:Key="SkillsItemStyle" TargetType="TextBlock" BasedOn="{StaticResource BodyMediumTextBlockStyle}">
            <Setter Property="Foreground" Value="#333333" />
        </Style>
        <Style x:Key="SkillsBtnStyle" TargetType="Button" BasedOn="{StaticResource IconButtonStyle}" />
        <Style x:Key="SkillsResponsiveStyle" TargetType="utu:ResponsiveView" />
    </fw:BasePage.Resources>

    <uf:BusyOverlay IsBusy="{Binding IsBusy}" BusyMessage="{Binding BusyMessage}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Export Area: Masthead + Content -->
            <Grid x:Name="SkillsExportArea" Background="#FFFFFF">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Editorial Masthead - Bold B&W Header -->
            <Border Background="#000000" Padding="{utu:Responsive Narrow='16,16', Normal='24,20'}">
                <StackPanel Spacing="2">
                    <TextBlock Text="FÃ„HIGKEITEN"
                               Style="{StaticResource PageHeaderTitleStyle}"
                               FontSize="{utu:Responsive Narrow=20, Normal=24}" />
                    <TextBlock Text="Technische Kompetenzen"
                               Style="{StaticResource PageHeaderSubtitleStyle}"
                               FontSize="{utu:Responsive Narrow=11, Normal=12}" />
                </StackPanel>
            </Border>

            <!-- Content -->
            <utu:ResponsiveView x:Name="SkillsContent" Grid.Row="1" Style="{StaticResource SkillsResponsiveStyle}">
            <utu:ResponsiveView.NarrowTemplate>
                <!-- Mobile: Single Column -->
                <DataTemplate>
                    <ScrollViewer Padding="20,16">
                        <StackPanel Spacing="24" MaxWidth="600" HorizontalAlignment="Center">
                            <!-- Expertise -->
                            <StackPanel Spacing="12" Visibility="{Binding ExpertiseSkills, Converter={StaticResource CollectionToVisibilityConverter}}">
                                <TextBlock Text="EXPERTISE" Style="{StaticResource SkillsSectionStyle}" />
                                <ItemsRepeater ItemsSource="{Binding ExpertiseSkills}">
                                    <ItemsRepeater.Layout>
                                        <FlowLayout MinRowSpacing="8" MinColumnSpacing="8" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#000000" CornerRadius="4" Padding="14,8">
                                                <TextBlock Text="{Binding}" Style="{StaticResource SkillsChipInvertStyle}" />
                                            </Border>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </StackPanel>

                            <!-- Basic Knowledge -->
                            <StackPanel Spacing="12" Visibility="{Binding BasicSkills, Converter={StaticResource CollectionToVisibilityConverter}}">
                                <TextBlock Text="GRUNDLAGEN" Style="{StaticResource SkillsSectionStyle}" />
                                <ItemsRepeater ItemsSource="{Binding BasicSkills}">
                                    <ItemsRepeater.Layout>
                                        <FlowLayout MinRowSpacing="8" MinColumnSpacing="8" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#F5F5F5" CornerRadius="4" Padding="14,8">
                                                <TextBlock Text="{Binding}" Style="{StaticResource SkillsChipStyle}" />
                                            </Border>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </StackPanel>

                            <!-- App Base -->
                            <StackPanel Spacing="12" Visibility="{Binding AppBaseTechnologies, Converter={StaticResource CollectionToVisibilityConverter}}">
                                <TextBlock Text="APP-BASIS" Style="{StaticResource SkillsSectionStyle}" />
                                <ItemsRepeater ItemsSource="{Binding AppBaseTechnologies}">
                                    <ItemsRepeater.Layout>
                                        <StackLayout Spacing="6" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" Spacing="10">
                                                <Ellipse Width="6" Height="6" Fill="#000000" VerticalAlignment="Center" />
                                                <TextBlock Text="{Binding}" Style="{StaticResource SkillsItemStyle}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </StackPanel>

                            <!-- DevOps -->
                            <StackPanel Spacing="12" Visibility="{Binding DevTools, Converter={StaticResource CollectionToVisibilityConverter}}">
                                <TextBlock Text="DEVOPS" Style="{StaticResource SkillsSectionStyle}" />
                                <ItemsRepeater ItemsSource="{Binding DevTools}">
                                    <ItemsRepeater.Layout>
                                        <FlowLayout MinRowSpacing="6" MinColumnSpacing="6" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#F5F5F5" CornerRadius="4" Padding="12,6">
                                                <TextBlock Text="{Binding}" Style="{StaticResource SkillsChipStyle}" />
                                            </Border>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </StackPanel>

                            <!-- AI Tools -->
                            <StackPanel Spacing="12" Visibility="{Binding AiTools, Converter={StaticResource CollectionToVisibilityConverter}}">
                                <TextBlock Text="AI TOOLS" Style="{StaticResource SkillsSectionStyle}" />
                                <ItemsRepeater ItemsSource="{Binding AiTools}">
                                    <ItemsRepeater.Layout>
                                        <FlowLayout MinRowSpacing="6" MinColumnSpacing="6" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#E5E5E5" CornerRadius="4" Padding="12,6">
                                                <TextBlock Text="{Binding}" Style="{StaticResource SkillsChipStyle}" />
                                            </Border>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </StackPanel>

                            <!-- Frameworks -->
                            <StackPanel Spacing="12" Visibility="{Binding Frameworks, Converter={StaticResource CollectionToVisibilityConverter}}">
                                <TextBlock Text="FRAMEWORKS" Style="{StaticResource SkillsSectionStyle}" />
                                <ItemsRepeater ItemsSource="{Binding Frameworks}">
                                    <ItemsRepeater.Layout>
                                        <FlowLayout MinRowSpacing="6" MinColumnSpacing="6" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <Border BorderBrush="#000000" BorderThickness="1" CornerRadius="4" Padding="12,6">
                                                <TextBlock Text="{Binding}" Style="{StaticResource SkillsChipStyle}" />
                                            </Border>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </StackPanel>

                            <!-- App Dev Experience -->
                            <StackPanel Spacing="12" Visibility="{Binding AppDevExperience, Converter={StaticResource CollectionToVisibilityConverter}}">
                                <TextBlock Text="ERFAHRUNG" Style="{StaticResource SkillsSectionStyle}" />
                                <ItemsRepeater ItemsSource="{Binding AppDevExperience}">
                                    <ItemsRepeater.Layout>
                                        <StackLayout Spacing="6" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" Spacing="10">
                                                <FontIcon Glyph="&#xE73E;" FontSize="12" Foreground="#000000" VerticalAlignment="Center" />
                                                <TextBlock Text="{Binding}" Style="{StaticResource SkillsItemStyle}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                </DataTemplate>
            </utu:ResponsiveView.NarrowTemplate>

            <utu:ResponsiveView.NormalTemplate>
                <!-- Desktop: Compact Single Column Layout -->
                <DataTemplate>
                    <ScrollViewer Padding="32,20">
                        <StackPanel MaxWidth="800" HorizontalAlignment="Center" Spacing="16">

                            <!-- EXPERTISE - Primary + Basic skills combined -->
                            <StackPanel Spacing="10" Visibility="{Binding ExpertiseSkills, Converter={StaticResource CollectionToVisibilityConverter}}">
                                <TextBlock Text="EXPERTISE" Style="{StaticResource SkillsSectionStyle}" />
                                <!-- Primary expertise - black chips -->
                                <ItemsRepeater ItemsSource="{Binding ExpertiseSkills}">
                                    <ItemsRepeater.Layout>
                                        <FlowLayout MinRowSpacing="6" MinColumnSpacing="6" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#000000" CornerRadius="3" Padding="12,6">
                                                <TextBlock Text="{Binding}" Style="{StaticResource SkillsChipInvertStyle}" FontSize="13" />
                                            </Border>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                                <!-- Basic skills - gray chips -->
                                <ItemsRepeater ItemsSource="{Binding BasicSkills}">
                                    <ItemsRepeater.Layout>
                                        <FlowLayout MinRowSpacing="6" MinColumnSpacing="6" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#9E9E9E" CornerRadius="3" Padding="10,5">
                                                <TextBlock Text="{Binding}" Style="{StaticResource SkillsChipInvertStyle}" FontSize="12" />
                                            </Border>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </StackPanel>

                            <!-- Thin divider -->
                            <Rectangle Height="1" Fill="#E0E0E0" Visibility="{Binding Frameworks, Converter={StaticResource CollectionToVisibilityConverter}}" />

                            <!-- FRAMEWORKS - outlined style -->
                            <StackPanel Spacing="8" Visibility="{Binding Frameworks, Converter={StaticResource CollectionToVisibilityConverter}}">
                                <TextBlock Text="FRAMEWORKS" Style="{StaticResource SkillsSectionStyle}" />
                                <ItemsRepeater ItemsSource="{Binding Frameworks}">
                                    <ItemsRepeater.Layout>
                                        <FlowLayout MinRowSpacing="6" MinColumnSpacing="6" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <Border BorderBrush="#000000" BorderThickness="1" CornerRadius="3" Padding="10,5">
                                                <TextBlock Text="{Binding}" Style="{StaticResource SkillsChipStyle}" FontSize="12" />
                                            </Border>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </StackPanel>

                            <!-- Thin divider -->
                            <Rectangle Height="1" Fill="#E0E0E0" Visibility="{Binding DevTools, Converter={StaticResource CollectionToVisibilityConverter}}" />

                            <!-- DEVOPS & TOOLS -->
                            <StackPanel Spacing="6" Visibility="{Binding DevTools, Converter={StaticResource CollectionToVisibilityConverter}}">
                                <TextBlock Text="DEVOPS &amp; TOOLS" Style="{StaticResource SkillsSectionStyle}" />
                                <ItemsRepeater ItemsSource="{Binding DevTools}">
                                    <ItemsRepeater.Layout>
                                        <FlowLayout MinRowSpacing="6" MinColumnSpacing="6" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <Border BorderBrush="#888888" BorderThickness="1" CornerRadius="3" Padding="8,4">
                                                <TextBlock Text="{Binding}" Style="{StaticResource SkillsChipStyle}" FontSize="11" />
                                            </Border>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </StackPanel>

                            <!-- Thin divider -->
                            <Rectangle Height="1" Fill="#E0E0E0" Visibility="{Binding AiTools, Converter={StaticResource CollectionToVisibilityConverter}}" />

                            <!-- AI TOOLS -->
                            <StackPanel Spacing="6" Visibility="{Binding AiTools, Converter={StaticResource CollectionToVisibilityConverter}}">
                                <TextBlock Text="AI TOOLS" Style="{StaticResource SkillsSectionStyle}" />
                                <ItemsRepeater ItemsSource="{Binding AiTools}">
                                    <ItemsRepeater.Layout>
                                        <FlowLayout MinRowSpacing="6" MinColumnSpacing="6" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <Border BorderBrush="#888888" BorderThickness="1" CornerRadius="3" Padding="8,4">
                                                <TextBlock Text="{Binding}" Style="{StaticResource SkillsChipStyle}" FontSize="11" />
                                            </Border>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </StackPanel>

                            <!-- Thin divider -->
                            <Rectangle Height="1" Fill="#E0E0E0" Visibility="{Binding AppBaseTechnologies, Converter={StaticResource CollectionToVisibilityConverter}}" />

                            <!-- APP-BASIS - compact list -->
                            <StackPanel Spacing="6" Visibility="{Binding AppBaseTechnologies, Converter={StaticResource CollectionToVisibilityConverter}}">
                                <TextBlock Text="APP-BASIS" Style="{StaticResource SkillsSectionStyle}" />
                                <ItemsRepeater ItemsSource="{Binding AppBaseTechnologies}">
                                    <ItemsRepeater.Layout>
                                        <StackLayout Spacing="4" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" Spacing="8">
                                                <Ellipse Width="5" Height="5" Fill="#000000" VerticalAlignment="Center" />
                                                <TextBlock Text="{Binding}" Style="{StaticResource SkillsItemStyle}" FontSize="13" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </StackPanel>

                            <!-- Thin divider -->
                            <Rectangle Height="1" Fill="#E0E0E0" Visibility="{Binding AppDevExperience, Converter={StaticResource CollectionToVisibilityConverter}}" />

                            <!-- ERFAHRUNG - compact checkmark list -->
                            <StackPanel Spacing="6" Visibility="{Binding AppDevExperience, Converter={StaticResource CollectionToVisibilityConverter}}">
                                <TextBlock Text="ERFAHRUNG" Style="{StaticResource SkillsSectionStyle}" />
                                <ItemsRepeater ItemsSource="{Binding AppDevExperience}">
                                    <ItemsRepeater.Layout>
                                        <StackLayout Spacing="4" />
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" Spacing="8">
                                                <FontIcon Glyph="&#xE73E;" FontSize="12" Foreground="#000000" VerticalAlignment="Center" />
                                                <TextBlock Text="{Binding}" Style="{StaticResource SkillsItemStyle}" FontSize="13" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </StackPanel>

                        </StackPanel>
                    </ScrollViewer>
                </DataTemplate>
            </utu:ResponsiveView.NormalTemplate>
        </utu:ResponsiveView>
        </Grid>

            <!-- Floating PDF Export Button (rendered on top) -->
            <controls:ExportHeaderControl ExportTarget="{x:Bind SkillsExportArea}"
                                           FileName="Skills_Daniel_Hufnagl"
                                           Margin="0,16,48,0"
                                           HorizontalAlignment="Right"
                                           VerticalAlignment="Top" />
        </Grid>
    </uf:BusyOverlay>
</fw:BasePage>
